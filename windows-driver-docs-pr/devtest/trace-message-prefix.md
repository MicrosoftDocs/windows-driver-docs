---
title: Trace Message Prefix
description: Trace Message Prefix
ms.assetid: ab400174-cc2a-4cb8-9b7b-390af6464a2e
keywords: ["Tracefmt WDK , trace message prefix", "prefix WDK Tracefmt", "trace message prefix WDK Tracefmt"]
---

# Trace Message Prefix


## <span id="ddk_trace_message_prefix_tools"></span><span id="DDK_TRACE_MESSAGE_PREFIX_TOOLS"></span>


Tracefmt adds a prefix to each trace message that consists of data stored in the [event trace log (.etl) file](trace-log.md) and the [trace message format (.tmf) file](trace-message-format-file.md).

Tracefmt includes particular data elements by default, but users can add and remove elements by changing the %TRACE\_FORMAT\_PREFIX% environment variable, a string that specifies a message definition compatible with **FormatMessage**.

The format of the default trace message prefix is as follows:

```
[%9!d!]%8!04X!.%3!04X!::%4!s! [%1!s!]
```

which produces the following prefix:

```
[CPUNumber]ProcessID.ThreadID :: SystemTime [MessageGUIDFriendlyName]
```

Each %*n* variable represents a parameter that is described in the following table.

<table>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Prefix variable identifier</th>
<th align="left">Variable type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><p>%1</p></td>
<td align="left"><p>string</p></td>
<td align="left"><p>The friendly name of the [message GUID](message-guid.md) of the trace message. By default, the friendly name of a message GUID is name of the directory in which the [trace provider](trace-provider.md) was built.</p>
<p>To change the friendly name of the message GUID, use the <strong>-p</strong> parameter with Tracewpp or with the RUN_WPP macro. For more information, see Run_WPP Options.</p></td>
</tr>
<tr class="even">
<td align="left"><p>%2</p></td>
<td align="left"><p>string</p></td>
<td align="left"><p>Source file and line number.</p>
<p>This variable represents the friendly name of the trace message. By default, the friendly name of a trace message is name of the source file and the line number of the code that generated the trace message.</p></td>
</tr>
<tr class="odd">
<td align="left"><p>%3</p></td>
<td align="left"><p>ULONG</p></td>
<td align="left"><p>Thread ID.</p>
<p>Identifies the thread that generated the trace message.</p></td>
</tr>
<tr class="even">
<td align="left"><p>%4</p></td>
<td align="left"><p>string</p></td>
<td align="left"><p>Time stamp of the time that the trace message was generated.</p></td>
</tr>
<tr class="odd">
<td align="left"><p>%5</p></td>
<td align="left"><p>string</p></td>
<td align="left"><p>Kernel time.</p>
<p>Displays the elapsed execution time for kernel-mode instruction, in CPU ticks, at the time that the trace message was generated.</p></td>
</tr>
<tr class="even">
<td align="left"><p>%6</p></td>
<td align="left"><p>string</p></td>
<td align="left"><p>User time.</p>
<p>Displays the elapsed execution time for user-mode instruction, in CPU ticks, at the time that the trace message was generated.</p></td>
</tr>
<tr class="odd">
<td align="left"><p>%7</p></td>
<td align="left"><p>LONG</p></td>
<td align="left"><p>Sequence number.</p>
<p>Displays the local or global sequence number of the trace message. Local sequence numbers, which are unique only to this trace session, are the default.</p></td>
</tr>
<tr class="even">
<td align="left"><p>%8</p></td>
<td align="left"><p>ULONG</p></td>
<td align="left"><p>Process ID.</p>
<p>Identifies the process that generated the trace message.</p></td>
</tr>
<tr class="odd">
<td align="left"><p>%9</p></td>
<td align="left"><p>ULONG</p></td>
<td align="left"><p>CPU number.</p>
<p>Identifies the CPU on which the trace message was generated.</p></td>
</tr>
<tr class="even">
<td align="left"><p>%!FUNC!</p></td>
<td align="left"><p>string</p></td>
<td align="left"><p>Function name.</p>
<p>Displays the name of the function that generated the trace message.</p></td>
</tr>
<tr class="odd">
<td align="left"><p>%!FLAGS!</p></td>
<td align="left"><p>string</p></td>
<td align="left"><p>Displays the name of the [trace flags](trace-flags.md) that enable the trace message.</p>
<p>(Because the [<strong>DoTraceMessage</strong>](https://msdn.microsoft.com/library/windows/hardware/ff544918) macro reverses the flags and level arguments, messages generated by DoTraceMessage display the value of the [trace level](trace-level.md) in this field.)</p></td>
</tr>
<tr class="even">
<td align="left"><p>%!LEVEL!</p></td>
<td align="left"><p>string</p></td>
<td align="left"><p>Displays the value of the [trace level](trace-level.md) that enables the trace message.</p>
<p>(Because the [<strong>DoTraceMessage</strong>](https://msdn.microsoft.com/library/windows/hardware/ff544918) macro reverses the flags and level arguments, messages generated by DoTraceMessage display the name of the [trace flags](trace-flags.md) in this field.)</p></td>
</tr>
<tr class="odd">
<td align="left"><p>%!COMPNAME!</p></td>
<td align="left"><p>string</p></td>
<td align="left"><p>Component name.</p>
<p>Displays the name of the component of the provider that generated the trace message. The component name appears only if it is specified in the tracing code.</p></td>
</tr>
<tr class="even">
<td align="left"><p>%!SUBCOMP!</p></td>
<td align="left"><p>string</p></td>
<td align="left"><p>Subcomponent name.</p>
<p>Displays the name of the subcomponent of the provider that generated the trace message. The component name appears only if it is specified in the tracing code.</p></td>
</tr>
</tbody>
</table>

 

The symbol within exclamation marks is a conversion character that specifies the formatting and precision of the variable. For example, %8!04X! specifies the process ID represented as a four-digit, unsigned hexadecimal number. These conversion characters must be included.

To change the elements, order, or formatting of the trace message prefix, use the %TRACE\_FORMAT\_PREFIX% environment variable. For an example, see [Example 7: Customizing the Trace Message Prefix](example-7--customizing-the-trace-message-prefix.md).

For an example of content in a TMF file, see Formatting Trace Messages from the tracedrv Sample.

Also, the **-csv** parameter adds an unconfigurable, detailed prefix to each trace message before the standard Tracefmt prefix. For a description of the fields in the CSV prefix, use the **-csvheader** parameter.

 

 

[Send comments about this topic to Microsoft](mailto:wsddocfb@microsoft.com?subject=Documentation%20feedback%20[devtest\devtest]:%20Trace%20Message%20Prefix%20%20RELEASE:%20%2811/17/2016%29&body=%0A%0APRIVACY%20STATEMENT%0A%0AWe%20use%20your%20feedback%20to%20improve%20the%20documentation.%20We%20don't%20use%20your%20email%20address%20for%20any%20other%20purpose,%20and%20we'll%20remove%20your%20email%20address%20from%20our%20system%20after%20the%20issue%20that%20you're%20reporting%20is%20fixed.%20While%20we're%20working%20to%20fix%20this%20issue,%20we%20might%20send%20you%20an%20email%20message%20to%20ask%20for%20more%20info.%20Later,%20we%20might%20also%20send%20you%20an%20email%20message%20to%20let%20you%20know%20that%20we've%20addressed%20your%20feedback.%0A%0AFor%20more%20info%20about%20Microsoft's%20privacy%20policy,%20see%20http://privacy.microsoft.com/default.aspx. "Send comments about this topic to Microsoft")




