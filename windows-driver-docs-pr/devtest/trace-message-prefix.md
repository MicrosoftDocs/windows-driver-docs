---
title: Trace Message Prefix
description: Trace Message Prefix
keywords:
- Tracefmt WDK , trace message prefix
- prefix WDK Tracefmt
- trace message prefix WDK Tracefmt
ms.date: 04/20/2017
---

# Trace Message Prefix

Tracefmt adds a prefix to each trace message that consists of data stored in the [event trace log (.etl) file](trace-log.md) and the [trace message format (.tmf) file](trace-message-format-file.md).

Tracefmt includes particular data elements by default, but users can add and remove elements by changing the %TRACE\_FORMAT\_PREFIX% environment variable, a string that specifies a message definition compatible with **FormatMessage**.

The format of the default trace message prefix is as follows:

```command
[%9!d!]%8!04X!.%3!04X!::%4!s! [%1!s!]
```

which produces the following prefix:

```command
[CPUNumber]ProcessID.ThreadID :: SystemTime [MessageGUIDFriendlyName]
```

Each %*n* variable represents a parameter that is described in the following table.

<table>
<thead>
<tr>
<th>Prefix variable identifier</th>
<th>Variable type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><p>%1</p></td>
<td><p>string</p></td>
<td><p>The friendly name of the <a href="message-guid.md" data-raw-source="[message GUID](message-guid.md)">message GUID</a> of the trace message. By default, the friendly name of a message GUID is name of the directory in which the <a href="trace-provider.md" data-raw-source="[trace provider](trace-provider.md)">trace provider</a> was built.</p>
<p>To change the friendly name of the message GUID, use the <strong>-p</strong> parameter with Tracewpp or with the RUN_WPP macro. For more information, see Run_WPP Options.</p></td>
</tr>
<tr class="even">
<td><p>%2</p></td>
<td><p>string</p></td>
<td><p>Source file and line number.</p>
<p>This variable represents the friendly name of the trace message. By default, the friendly name of a trace message is name of the source file and the line number of the code that generated the trace message.</p></td>
</tr>
<tr>
<td><p>%3</p></td>
<td><p>ULONG</p></td>
<td><p>Thread ID.</p>
<p>Identifies the thread that generated the trace message.</p></td>
</tr>
<tr class="even">
<td><p>%4</p></td>
<td><p>string</p></td>
<td><p>Time stamp of the time that the trace message was generated.</p></td>
</tr>
<tr>
<td><p>%5</p></td>
<td><p>string</p></td>
<td><p>Kernel time.</p>
<p>Displays the elapsed execution time for kernel-mode instruction, in CPU ticks, at the time that the trace message was generated.</p></td>
</tr>
<tr class="even">
<td><p>%6</p></td>
<td><p>string</p></td>
<td><p>User time.</p>
<p>Displays the elapsed execution time for user-mode instruction, in CPU ticks, at the time that the trace message was generated.</p></td>
</tr>
<tr>
<td><p>%7</p></td>
<td><p>LONG</p></td>
<td><p>Sequence number.</p>
<p>Displays the local or global sequence number of the trace message. Local sequence numbers, which are unique only to this trace session, are the default.</p></td>
</tr>
<tr class="even">
<td><p>%8</p></td>
<td><p>ULONG</p></td>
<td><p>Process ID.</p>
<p>Identifies the process that generated the trace message.</p></td>
</tr>
<tr>
<td><p>%9</p></td>
<td><p>ULONG</p></td>
<td><p>CPU number.</p>
<p>Identifies the CPU on which the trace message was generated.</p></td>
</tr>
<tr class="even">
<td><p>%!FUNC!</p></td>
<td><p>string</p></td>
<td><p>Function name.</p>
<p>Displays the name of the function that generated the trace message.</p></td>
</tr>
<tr>
<td><p>%!FLAGS!</p></td>
<td><p>string</p></td>
<td><p>Displays the name of the <a href="trace-flags.md" data-raw-source="[trace flags](trace-flags.md)">trace flags</a> that enable the trace message.</p>
<p>(Because the <a href="/previous-versions/windows/hardware/previsioning-framework/ff544918(v=vs.85)" data-raw-source="[&lt;strong&gt;DoTraceMessage&lt;/strong&gt;](/previous-versions/windows/hardware/previsioning-framework/ff544918(v=vs.85))"><strong>DoTraceMessage</strong></a> macro reverses the flags and level arguments, messages generated by DoTraceMessage display the value of the <a href="trace-level.md" data-raw-source="[trace level](trace-level.md)">trace level</a> in this field.)</p></td>
</tr>
<tr class="even">
<td><p>%!LEVEL!</p></td>
<td><p>string</p></td>
<td><p>Displays the value of the <a href="trace-level.md" data-raw-source="[trace level](trace-level.md)">trace level</a> that enables the trace message.</p>
<p>(Because the <a href="/previous-versions/windows/hardware/previsioning-framework/ff544918(v=vs.85)" data-raw-source="[&lt;strong&gt;DoTraceMessage&lt;/strong&gt;](/previous-versions/windows/hardware/previsioning-framework/ff544918(v=vs.85))"><strong>DoTraceMessage</strong></a> macro reverses the flags and level arguments, messages generated by DoTraceMessage display the name of the <a href="trace-flags.md" data-raw-source="[trace flags](trace-flags.md)">trace flags</a> in this field.)</p></td>
</tr>
<tr>
<td><p>%!COMPNAME!</p></td>
<td><p>string</p></td>
<td><p>Component name.</p>
<p>Displays the name of the component of the provider that generated the trace message. The component name appears only if it is specified in the tracing code.</p></td>
</tr>
<tr class="even">
<td><p>%!SUBCOMP!</p></td>
<td><p>string</p></td>
<td><p>Subcomponent name.</p>
<p>Displays the name of the subcomponent of the provider that generated the trace message. The component name appears only if it is specified in the tracing code.</p></td>
</tr>
</tbody>
</table>

 

The symbol within exclamation marks is a conversion character that specifies the formatting and precision of the variable. For example, %8!04X! specifies the process ID represented as a four-digit, unsigned hexadecimal number. These conversion characters must be included.

To change the elements, order, or formatting of the trace message prefix, use the %TRACE\_FORMAT\_PREFIX% environment variable. For an example, see [Example 7: Customizing the Trace Message Prefix](example-7--customizing-the-trace-message-prefix.md).

For an example of content in a TMF file, see Formatting Trace Messages from the tracedrv Sample.

Also, the **-csv** parameter adds an unconfigurable, detailed prefix to each trace message before the standard Tracefmt prefix. For a description of the fields in the CSV prefix, use the **-csvheader** parameter.

